Integrated_system

user(userid, password)
board(id, userid, title, content, create_at)
comment(id, boardid, userid, message, created_at)
board_file(id, board_id, original_filename, saved_filename, file_size, content_type, upload_time)


CREATE DATABASE integrateddb;


CREATE TABLE users (
  userid VARCHAR(15) PRIMARY KEY,
  password VARCHAR(20) NOT NULL
);


CREATE TABLE board (
  id INT PRIMARY KEY AUTO_INCREMENT,
  userid VARCHAR(15) NOT NULL,
  title VARCHAR(50) NOT NULL,
  content TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (userid) REFERENCES users(userid)
);


CREATE TABLE comment (
  id INT PRIMARY KEY AUTO_INCREMENT,
  board_id INT NOT NULL,
  userid VARCHAR(50) NOT NULL,
  message VARCHAR(200) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (userid) REFERENCES users(userid),
  FOREIGN KEY (board_id) REFERENCES board(id)
);


CREATE TABLE board_file (
  id INT PRIMARY KEY AUTO_INCREMENT,
  board_id INT NOT NULL,
  original_filename VARCHAR(255),  
  saved_filename VARCHAR(255),  
  file_size BIGINT,
  content_type VARCHAR(100),
  upload_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (board_id) REFERENCES board(id) ON DELETE CASCADE
);
